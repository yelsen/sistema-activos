<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<body>
    <form th:fragment="content" th:action="@{/sistema/configuracion/guardar}" method="post">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-12">
                <!-- Page header -->
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h1 class="mb-3 h2">Configuración del Sistema</h1>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a th:href="@{/dashboard}">Dashboard</a></li>
                                <li class="breadcrumb-item"><a href="#">Sistema</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Configuración</li>
                            </ol>
                        </nav>
                    </div>
                    <div class="form-check form-switch">
                        <button class="btn btn-primary" type="submit">Guardar cambios</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class=" tab-content">
                <ul class="nav nav-line-bottom mb-6 text-nowrap" id="config-tab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active py-2" id="general-tab" data-bs-toggle="pill" href="#general"
                            role="tab" aria-controls="general" aria-selected="true">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="me-2">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path
                                    d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" />
                                <path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" />
                            </svg> General
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link py-2" id="security-tab" data-bs-toggle="pill" href="#security" role="tab"
                            aria-controls="security" aria-selected="false">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="me-2">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path
                                    d="M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3" />
                                <path d="M12 11m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
                                <path d="M12 12l0 2.5" />
                            </svg> Seguridad
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link py-2" id="notifications-tab" data-bs-toggle="pill" href="#notifications"
                            role="tab" aria-controls="notifications" aria-selected="false">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="me-2">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path
                                    d="M10 5a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6" />
                                <path d="M9 17v1a3 3 0 0 0 6 0v-1" />
                            </svg> Notificaciones
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link py-2" id="backup-tab" data-bs-toggle="pill" href="#backup" role="tab"
                            aria-controls="backup" aria-selected="false">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="me-2">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path d="M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3" />
                                <path d="M4 6v6c0 1.657 3.582 3 8 3c.836 0 1.64 -.078 2.4 -.22" />
                                <path d="M20 12v-6" />
                                <path d="M4 12v6c0 1.657 3.582 3 8 3c.13 0 .258 -.002 .385 -.006" />
                                <path d="M19 22v-6" />
                                <path d="M22 19l-3 -3l-3 3" />
                            </svg> Backup
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link py-2" id="api-tab" data-bs-toggle="pill" href="#api" role="tab"
                            aria-controls="api" aria-selected="false">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="me-2">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path
                                    d="M9.785 6l8.215 8.215l-2.054 2.054a5.81 5.81 0 1 1 -8.215 -8.215l2.054 -2.054z" />
                                <path d="M4 20l3.5 -3.5" />
                                <path d="M15 4l-3.5 3.5" />
                                <path d="M20 9l-3.5 3.5" />
                            </svg> API
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link py-2" id="maintenance-tab" data-bs-toggle="pill" href="#maintenance"
                            role="tab" aria-controls="maintenance" aria-selected="false">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="me-2">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path
                                    d="M7 10h3v-3l-3.5 -3.5a6 6 0 0 1 8 8l6 6a2 2 0 0 1 -3 3l-6 -6a6 6 0 0 1 -8 -8l3.5 3.5" />
                            </svg> Mantenimiento
                        </a>
                    </li>
                </ul>
            </div>

            <div class="tab-content" id="config-tabContent">
                <!-- General Tab -->
                <div class="tab-pane fade show active" id="general" role="tabpanel" aria-labelledby="general-tab">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Configuración General</h5>
                            <p class="mb-0 text-secondary">Configuración básica del sistema</p>
                        </div>
                        <div class="card-body row">
                            <!--imputs con label y todo tipo de texto necesario como select y otros-->
                            <div class="col-md-6 pe-3">
                                <div class="row gx-2">
                                    <div class="col-12 mb-3" id="costo-group">
                                        <label for="nombre_institucion" class="form-label">Nombre de la
                                            Institución</label> 
                                        <!-- Iteramos para encontrar el índice correcto y enlazar los campos -->
                                        <div th:each="config, iterStat : ${allConfigs}" th:if="${config.claveConfig == 'sistema.nombre'}">
                                            <input type="hidden" th:name="|allConfigs[${iterStat.index}].idConfig|" th:value="${config.idConfig}" />
                                            <input type="hidden" th:name="|allConfigs[${iterStat.index}].claveConfig|" th:value="${config.claveConfig}" />
                                            <input type="text" class="form-control" th:name="|allConfigs[${iterStat.index}].valorConfig|" th:value="${config.valorConfig}"
                                            name="nombre_institucion"
                                            placeholder="Universidad Nacional Santiago Antúnez de Mayolo" />
                                        </div>
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label for="direccion" class="form-label">Dirección</label>
                                        <input type="text" class="form-control" id="direccion" name="direccion"
                                            placeholder="Av. Centenario 200, Huaraz - Ancash" />
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label for="correo_institucional" class="form-label">Correo
                                            Institucional</label>
                                        <input type="email" class="form-control" id="correo_institucional"
                                            name="correo_institucional" placeholder="unasam@unasam.edu.pe" />
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 ps-3">
                                <div class="row gx-2">
                                    <div class="col-12 mb-3">
                                        <label for="siglas" class="form-label">Siglas</label>
                                        <input type="text" class="form-control" id="siglas" name="siglas"
                                            placeholder="UNASAM" />
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label for="telefono_principal" class="form-label">Teléfono Principal</label>
                                        <input type="text" class="form-control" id="telefono_principal"
                                            name="telefono_principal" placeholder="043-421811" />
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label for="zona-horaria" class="form-label">Zona Horaria</label>
                                        <select class="form-select" name="zona-horaria" id="zona-horaria" data-choices>
                                            <option value="" enabled selected>Seleccione una zona horaria...</option>
                                            <optgroup label="América">
                                                <option value="America/Lima">America/Lima (UTC-05:00)</option>
                                                <option value="America/New_York">America/New_York (UTC-04:00)</option>
                                                <option value="America/Bogota">America/Bogota (UTC-05:00)</option>
                                                <option value="America/Mexico_City">America/Mexico_City (UTC-06:00)
                                                </option>
                                                <option value="America/Argentina/Buenos_Aires">America/Buenos_Aires
                                                    (UTC-03:00)</option>
                                            </optgroup>
                                            <optgroup label="Europa">
                                                <option value="Europe/Madrid">Europe/Madrid (UTC+02:00)</option>
                                                <option value="Europe/London">Europe/London (UTC+01:00)</option>
                                            </optgroup>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 mb-3">
                                <label for="descripcion_oficina" class="form-label">Descripcion de la Oficina</label>
                                <textarea class="form-control" name="descripcion_oficina" id="descripcion_oficina"
                                    placeholder="Oficina General de Tecnologías de Información, Sistemas y Estadística"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Security Tab -->
                <div class="tab-pane fade" id="security" role="tabpanel" aria-labelledby="security-tab">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Configuración de Seguridad</h5>
                            <p class="mb-0 text-secondary">Políticas de seguridad y acceso al sistema</p>
                        </div>
                        <div class="card-body row">
                            <!--imputs con label y todo tipo de texto necesario como select y otros-->
                            <div class="col-md-6 pe-3">
                                <div class="row gx-2">
                                    <div class="col-12 mb-3" id="costo-group">
                                        <label for="longitud_minima_contrasena" class="form-label">Longitud mínima de
                                            contraseña</label>
                                        <input type="number" class="form-control" id="longitud_minima_contrasena"
                                            name="longitud_minima_contrasena" placeholder="8" />
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label for="tiempo_bloqueo" class="form-label">Tiempo de bloqueo
                                            (minutos)</label>
                                        <input type="number" class="form-control" id="tiempo_bloqueo"
                                            name="tiempo_bloqueo" placeholder="15" />
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 ps-3">
                                <div class="row gx-2">
                                    <div class="col-12 mb-3">
                                        <label for="max_intentos_login" class="form-label">Máximo intentos de
                                            login</label>
                                        <input type="number" class="form-control" id="max_intentos_login"
                                            name="max_intentos_login" placeholder="3" />
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label for="cambio_contrasena_dias" class="form-label">Cambio de contraseña
                                            (días)</label>
                                        <input type="number" class="form-control" id="cambio_contrasena_dias"
                                            name="cambio_contrasena_dias" placeholder="90" />
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 mb-3">
                                <p>Políticas de Seguridad</p>
                                <div class="d-flex gap-1">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch"
                                            id="flexSwitchCheckChecked" checked>
                                        <label class="form-check-label" for="flexSwitchCheckChecked">
                                            Requerir caracteres especiales en contraseñas
                                        </label>
                                    </div>
                                </div>
                                <div class="d-flex gap-1">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch"
                                            id="flexSwitchCheckChecked" checked>
                                        <label class="form-check-label" for="flexSwitchCheckChecked">
                                            Requerir números de contraseñas
                                        </label>
                                    </div>
                                </div>
                                <div class="d-flex gap-1">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch"
                                            id="flexSwitchCheckDefault">
                                        <label class="form-check-label" for="flexSwitchCheckDefault">
                                            Autentificacion de dos factores (2FA)
                                        </label>
                                    </div>
                                </div>
                                <div class="d-flex gap-1">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch"
                                            id="flexSwitchCheckChecked" checked>
                                        <label class="form-check-label" for="flexSwitchCheckChecked">
                                            Registro de actividad de usuarios
                                        </label>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- Notifications Tab -->
                <div class="tab-pane fade" id="notifications" role="tabpanel" aria-labelledby="notifications-tab">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Configuración de Notificaciones</h5>
                            <p class="mb-0 text-secondary">Gestiona las notificaciones automáticas del sistema</p>
                        </div>
                        <div class="card-body row">
                            <!--imputs con label y todo tipo de texto necesario como select y otros-->
                            <div class="col-12 mb-3">
                                <!-- Notificaciones por Email -->
                                <div class="d-flex justify-content-between align-items-center mb-4">
                                    <div>
                                        <h6 class="mb-0 fw-semibold">Notificaciones por Email</h6>
                                        <small class="text-secondary">Enviar notificaciones importantes por correo
                                            electrónico.</small>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch"
                                            id="switchNotificacionesEmail" checked>
                                    </div>
                                </div>
                                <!-- Alertas de Mantenimiento -->
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="mb-0 fw-semibold">Alertas de Mantenimiento</h6>
                                        <small class="text-secondary">Notificar sobre mantenimientos programados y
                                            vencidos.</small>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch"
                                            id="switchAlertasMantenimiento" checked>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 pe-3">
                                <div class="row gx-2">
                                    <div class="col-12 mb-3" id="costo-group">
                                        <label for="smtp_server" class="form-label">Servidor SMTP</label>
                                        <input type="text" class="form-control" id="smtp_server" name="smtp_server"
                                            placeholder="smtp.unasam.edu.pe" />
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label for="smtp_port" class="form-label">Usuario SMTP</label>
                                        <input type="text" class="form-control" id="smtp_user" name="smtp_user"
                                            placeholder="sistema@unasam.edu.pe" />
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 ps-3">
                                <div class="row gx-2">
                                    <div class="col-12 mb-3">
                                        <label for="max_intentos_login" class="form-label">Puerto SMTP</label>
                                        <input type="text" class="form-control" id="smtp_port" name="smtp_port"
                                            placeholder="587" />
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label for="cambio_contrasena_dias" class="form-label">Email remitente</label>
                                        <input type="text" class="form-control" id="cambio_contrasena_dias"
                                            name="cambio_contrasena_dias" placeholder="OGTIESE - Sistema de Activos" />
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- Backup Tab -->
                <div class="tab-pane fade" id="backup" role="tabpanel" aria-labelledby="backup-tab">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Copia de Seguridad y Restauración</h5>
                            <p class="mb-0 text-secondary">Gestiona las copias de seguridad de la base de datos.</p>
                        </div>
                        <div class="card-body">
                            <!-- Copia de Seguridad Programada -->
                            <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-4">
                                <div>
                                    <h6 class="mb-0 fw-semibold">Copia de Seguridad Programada</h6>
                                    <small class="text-secondary">Activa para realizar copias de seguridad
                                        automáticas.</small>
                                </div>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" role="switch"
                                        id="switchBackupProgramado">
                                </div>
                            </div>

                            <!-- Copia de Seguridad Manual -->
                            <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-4">
                                <div>
                                    <h6 class="mb-0 fw-semibold">Copia de Seguridad Manual</h6>
                                    <small class="text-secondary">Genera una copia de seguridad de la base de datos en
                                        este momento.</small>
                                </div>
                                <button class="btn btn-primary">Generar Backup</button>
                            </div>

                            <!-- Restaurar Copia de Seguridad -->
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-0 fw-semibold">Restaurar desde Copia de Seguridad</h6>
                                    <small class="text-secondary">Sube un archivo de backup para restaurar el sistema.
                                        Esta acción es irreversible.</small>
                                </div>
                                <button class="btn btn-outline-danger">Restaurar</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- API Tab -->
                <div class="tab-pane fade" id="api" role="tabpanel" aria-labelledby="api-tab">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center border-bottom-0">
                            <div>
                                <h5 class="card-title mb-0">Configuración de API</h5>
                                <p class="mb-0 text-secondary">Gestiona las claves de API para integraciones externas.
                                </p>
                            </div>
                            <button class="btn btn-primary">Generar Nueva Clave</button>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-centered text-nowrap">
                                    <thead class="table-light">
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Clave API</th>
                                            <th>Estado</th>
                                            <th>Creado</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Servicio de Reportes Externo</td>
                                            <td><span class="font-monospace">sk_...a1b2</span></td>
                                            <td><span
                                                    class="badge bg-success-subtle text-success-emphasis">Activa</span>
                                            </td>
                                            <td>24 de Mayo, 2024</td>
                                            <td class="text-end">
                                                <a href="#" class="btn btn-ghost btn-icon btn-sm rounded-circle"
                                                    data-bs-toggle="tooltip" data-bs-placement="top" title="Revocar">
                                                    <i class="ti ti-ban fs-5"></i>
                                                </a>
                                                <a href="#" class="btn btn-ghost btn-icon btn-sm rounded-circle"
                                                    data-bs-toggle="tooltip" data-bs-placement="top" title="Eliminar">
                                                    <i class="ti ti-trash fs-5"></i>
                                                </a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Integración PowerBI</td>
                                            <td><span class="font-monospace">sk_...c3d4</span></td>
                                            <td><span
                                                    class="badge bg-danger-subtle text-danger-emphasis">Revocada</span>
                                            </td>
                                            <td>15 de Enero, 2024</td>
                                            <td class="text-end">
                                                <a href="#" class="btn btn-ghost btn-icon btn-sm rounded-circle"
                                                    data-bs-toggle="tooltip" data-bs-placement="top" title="Activar">
                                                    <i class="ti ti-check fs-5"></i>
                                                </a>
                                                <a href="#" class="btn btn-ghost btn-icon btn-sm rounded-circle"
                                                    data-bs-toggle="tooltip" data-bs-placement="top" title="Eliminar">
                                                    <i class="ti ti-trash fs-5"></i>
                                                </a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Maintenance Tab -->
                <div class="tab-pane fade" id="maintenance" role="tabpanel" aria-labelledby="maintenance-tab">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Modo Mantenimiento</h5>
                            <p class="mb-0 text-secondary">Activa esta opción para restringir el acceso al sistema
                                durante las actualizaciones.</p>
                        </div>
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-4">
                                <div>
                                    <h6 class="mb-0 fw-semibold">Activar Modo Mantenimiento</h6>
                                    <small class="text-secondary">Solo los administradores podrán acceder al
                                        sistema.</small>
                                </div>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" role="switch"
                                        id="switchModoMantenimiento">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12 mb-3">
                                    <label for="maintenance-title" class="form-label">Título del Mensaje</label>
                                    <input type="text" class="form-control" id="maintenance-title"
                                        placeholder="Ej: Mantenimiento Programado">
                                </div>
                                <div class="col-12 mb-3">
                                    <label for="maintenance-message" class="form-label">Mensaje de Mantenimiento</label>
                                    <textarea class="form-control" id="maintenance-message" rows="3"
                                        placeholder="El sistema estará temporalmente fuera de servicio por mejoras. Volveremos pronto."></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</body>

</html>